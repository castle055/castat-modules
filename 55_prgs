#!/bin/sh

[ -f '/home/victor/repos/inhouse/cipcomms/cipcomms_do' ] || exit 1
cipget='/home/victor/repos/inhouse/cipcomms/cipcomms_do prgs get'
num="$($cipget percent)"
#[ "$num" == "" ] && num=0

prc1=$($cipget prc1)
[ "$prc1" == "" ] && prc1=0
if [[ "$prc1" -gt 0 ]]; then
	PRC1="^l2,3,$((7+$prc1)),3^^l3,4,$((8+$prc1)),4^^l3,5,$((8+$prc1)),5^^l4,6,$((9+$prc1)),6^^c#06060a^^l12,3,16,7^^l13,3,17,7^^l22,3,26,7^^l23,3,27,7^^l32,3,36,7^^l33,3,37,7^^l42,3,46,7^^l43,3,47,7^^l52,3,56,7^^l53,3,57,7^^l62,3,66,7^^l63,3,67,7^^l72,3,76,7^^l73,3,77,7^^l82,3,86,7^^l83,3,87,7^^l92,3,96,7^^l93,3,97,7^^d^"
fi

prc2=$($cipget prc2)
[ "$prc2" == "" ] && prc2=0
[ "$prc2" -le 0 ] || PRC2="^l6,11,$((10+$prc2)),11^^l6,11,$((10+$prc2)),11^^l6,12,$((10+$prc2)),12^^l6,13,$((10+$prc2)),13^^c#06060a^^l15,11,15,14^^l16,11,16,14^^l25,11,25,14^^l26,11,26,14^^l35,11,35,14^^l36,11,36,14^^l45,11,45,14^^l46,11,46,14^^l55,11,55,14^^l56,11,56,14^^l65,11,65,14^^l66,11,66,14^^l75,11,75,14^^l76,11,76,14^^l85,11,85,14^^l86,11,86,14^^l95,11,95,14^^l96,11,96,14^^d^"

prc3=$($cipget prc3)
[ "$prc3" == "" ] && prc3=0
[ "$prc3" -le 0 ] || PRC3="^l2,3,$((7+$prc3)),3^^l3,4,$((8+$prc3)),4^^l3,5,$((8+$prc3)),5^^l4,6,$((9+$prc3)),6^^c#06060a^^l12,3,16,7^^l13,3,17,7^^l22,3,26,7^^l23,3,27,7^^l32,3,36,7^^l33,3,37,7^^l42,3,46,7^^l43,3,47,7^^l52,3,56,7^^l53,3,57,7^^l62,3,66,7^^l63,3,67,7^^l72,3,76,7^^l73,3,77,7^^l82,3,86,7^^l83,3,87,7^^l92,3,96,7^^l93,3,97,7^^d^"

[ "$PRC1" != "" ] && { BAR_TEMPLATE1="^l1,3,5,9^^l5,8,109,8^"; SPACING="^f120^"; }
[ "$PRC2" != "" ] && { BAR_TEMPLATE1="^l5,11,5,16^^l6,15,110,15^"; SPACING="^f120^"; }
[ "$PRC3" != "" ] && { BAR_TEMPLATE1="^l4,17,1,22^^l2,22,107,22^^l0,10,0,18^"; SPACING="^f120^"; }

echo "$BAR_TEMPLATE1$BAR_TEMPLATE2$BAR_TEMPLATE2$PRC1$PRC2$PRC3$SPACING"
